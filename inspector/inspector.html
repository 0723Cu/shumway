<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>SWF Inspector</title>
    <style>
      html, body {
        width: 100%;
        height: 100%;
      }
      body {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <div id="stage"></div>

    <script src="jquery.min.js"></script>

    <script src="../src/swf/util.js"></script>
    <script src="../src/swf/swf.js"></script>
    <script>
      SWF.workerPath = "../src/swf/worker.js";
    </script>
    <script src="../src/swf/worker.js"></script>
    <script src="../src/swf/prototypes.js"></script>
    <script src="../src/swf/embed.js"></script>
    <script src="../src/swf/renderer.js"></script>

    <script>
      window.print = function (msg) {
        console.log(msg);
      };
      var webShell = true;
    </script>
    <script src="../src/avm2/util.js"></script>
    <script>
      var options = new OptionSet('option(s)');
      var traceLevel = options.register(new Option('traceLevel', 't', 0, 'trace level'));
    </script>
    <script src="../src/avm2/constants.js"></script>
    <script src="../src/avm2/opcodes.js"></script>
    <script src="../src/avm2/parser.js"></script>
    <script src="../src/avm2/analyze.js"></script>
    <script src="../src/avm2/compiler.js"></script>
    <script src="../src/avm2/disassembler.js"></script>
    <script src="../src/avm2/runtime.js"></script>

    <script>
      var body = $('body');
      var stage = $('#stage');

      function readFile(file) {
        var reader = new FileReader();
        reader.onload = function() {
          SWF.embed(this.result, stage[0]);
        }
        reader.readAsArrayBuffer(file);
      }

      body.on('dragenter dragover', function(event) {
        event.stopPropagation();
        event.preventDefault();
      });
      body.on('drop', function(event) {
        event.stopPropagation();
        event.preventDefault();
        var file = event.originalEvent.dataTransfer.files[0];
        readFile(file);
      });
    </script>
  </body>
</html>
